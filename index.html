<div id="ai-app" style="font-family: 'Segoe UI', Arial, sans-serif; border:2px solid #ffcc00; padding:30px; border-radius:15px; text-align:center; background: #1a1a1a; color: white; max-width: 500px; margin: 20px auto; box-shadow: 0 10px 30px rgba(0,0,0,0.5);">
    <h2 style="color:#ffcc00; text-transform: uppercase; letter-spacing: 2px;">OrbitScan AI Scanner</h2>
    <p style="opacity: 0.8;">–°–∏—Å—Ç–µ–º–∞ –ò–ò-–¥–µ—Ñ–µ–∫—Ç–æ—Å–∫–æ–ø–∏–∏ –æ–±—à–∏–≤–∫–∏</p>
    
    <input type="file" id="file-input" accept="image/*" style="display:none;">
    <button onclick="document.getElementById('file-input').click()" style="background:#ffcc00; color:#000; border:none; padding:15px 30px; border-radius:50px; cursor:pointer; font-weight:bold; transition: 0.3s; box-shadow: 0 4px 15px rgba(255,204,0,0.3);">–í–´–ë–†–ê–¢–¨ –°–ù–ò–ú–û–ö</button>
    
    <div style="margin-top:25px; border: 1px dashed #444; border-radius: 10px; padding: 10px;">
        <img id="preview" style="max-width:100%; height:200px; display:none; border-radius:8px; margin: 0 auto;">
    </div>

    <div id="result-label" style="font-size:22px; font-weight:bold; margin-top:20px; letter-spacing: 1px;">–û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∏—Å—Ç–µ–º—ã...</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest/dist/tf.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@latest/dist/teachablemachine-image.min.js"></script>

<script>
    // –¢–≤–æ—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –º–æ–¥–µ–ª—å —Å Teachable Machine
    const MODEL_URL = "https://teachablemachine.withgoogle.com/models/12f_3hU3C/";
    let model;

    // –§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–∏
    async function loadModel() {
        try {
            model = await tmImage.load(MODEL_URL + "model.json", MODEL_URL + "metadata.json");
            document.getElementById('result-label').innerHTML = "üü¢ –°–ò–°–¢–ï–ú–ê –ì–û–¢–û–í–ê";
        } catch (e) {
            document.getElementById('result-label').innerHTML = "‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–∏";
        }
    }
    loadModel();

    // –õ–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–æ—Ç–æ
    document.getElementById('file-input').addEventListener('change', async (e) => {
        const file = e.target.files[0];
        if (!file) return;

        const img = document.getElementById('preview');
        img.src = URL.createObjectURL(file);
        img.style.display = 'block';

        const resultDiv = document.getElementById('result-label');
        resultDiv.innerHTML = "üõ∞Ô∏è –ê–ù–ê–õ–ò–ó –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–Ø...";
        resultDiv.style.color = "#ffcc00";

        img.onload = async () => {
            const prediction = await model.predict(img);
            
            let topClass = "";
            let topProb = 0;
            
            // –ù–∞—Ö–æ–¥–∏–º —Å–∞–º—ã–π –≤–µ—Ä–æ—è—Ç–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
            prediction.forEach(p => {
                if(p.probability > topProb) {
                    topProb = p.probability;
                    topClass = p.className;
                }
            });

            // –í—ã–≤–æ–¥ –≤–µ—Ä–¥–∏–∫—Ç–∞
            if (topClass === "damage") {
                resultDiv.innerHTML = "‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï: –û–ë–ù–ê–†–£–ñ–ï–ù–û –ü–û–í–†–ï–ñ–î–ï–ù–ò–ï!";
                resultDiv.style.color = "#ff4d4d";
            } else {
                resultDiv.innerHTML = "‚úÖ –ü–û–í–†–ï–ñ–î–ï–ù–ò–ô –ù–ï –í–´–Ø–í–õ–ï–ù–û";
                resultDiv.style.color = "#4dff88";
            }
        };
    });
</script>
