<!-- end list -->
<div id="ai-app" style="font-family: Arial, sans-serif; border:3px solid #0055ff; padding:30px; border-radius:20px; text-align:center; background: #fff; max-width: 500px; margin: 0 auto;">
    <h2 style="color:#0055ff;">AEROO Space Scanner</h2>
    <p>Загрузите фото спутника для проверки</p>
    
    <input type="file" id="file-input" accept="image/*" style="display:none;">
    <button onclick="document.getElementById('file-input').click()" style="background:#0055ff; color:#fff; border:none; padding:15px 25px; border-radius:10px; cursor:pointer; font-weight:bold;">ВЫБРАТЬ ФОТО</button>
    
    <div style="margin-top:20px;">
        <img id="preview" style="max-width:100%; height:200px; display:none; border-radius:10px; margin: 0 auto;">
    </div>

    <div id="result-label" style="font-size:24px; font-weight:bold; margin-top:20px; color:#333;">Ожидание загрузки...</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest/dist/tf.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@latest/dist/teachablemachine-image.min.js"></script>

<script>
    const MODEL_URL = "https://teachablemachine.withgoogle.com/models/12f_3hU3C/";
    let model;

    async function loadModel() {
        model = await tmImage.load(MODEL_URL + "model.json", MODEL_URL + "metadata.json");
        document.getElementById('result-label').innerHTML = "Система готова";
    }
    loadModel();

    document.getElementById('file-input').addEventListener('change', async (e) => {
        const file = e.target.files[0];
        if (!file) return;

        const img = document.getElementById('preview');
        img.src = URL.createObjectURL(file);
        img.style.display = 'block';

        const resultDiv = document.getElementById('result-label');
        resultDiv.innerHTML = "АНАЛИЗИРУЮ...";

        img.onload = async () => {
            const prediction = await model.predict(img);
            
            let topClass = "";
            let topProb = 0;
            prediction.forEach(p => {
                if(p.probability > topProb) {
                    topProb = p.probability;
                    topClass = p.className;
                }
            });

            if (topClass === "damage") {
                resultDiv.innerHTML = "⚠️ ОБНАРУЖЕНО ПОВРЕЖДЕНИЕ!";
                resultDiv.style.color = "red";
            } else {
                resultDiv.innerHTML = "✅ КОРПУС ЦЕЛ";
                resultDiv.style.color = "green";
            }
        };
    });
</script>
